<template>
  <section class="contact-area ptb-100">
    <div class="container">
      <div class="contact-inner">
        <div class="row">
                      <div class="col-lg-6 col-md-12">
            <div class="contact-features-list">
              <h3>Nh·ªØng l√Ω do tuy·ªát v·ªùi kh√°c ƒë·ªÉ ch·ªçn ch√∫ng t√¥i</h3>
              <p>B·∫Øt ƒë·∫ßu b∆∞·ªõc ƒë·∫ßu ti√™n ƒë·ªÉ tƒÉng nƒÉng su·∫•t v√† gi·∫£m cƒÉng th·∫≥ng c√πng Striki.</p>
              <p>Ch√∫ng t√¥i l√† m·ªôt ƒë·ªôi ng≈© chuy√™n nghi·ªáp v√† t·∫≠n t√¢m, lu√¥n s·∫µn s√†ng h·ªó tr·ª£ c√°c doanh nh√¢n, chuy√™n gia v√† c√°c c√¥ng ty nh·ªè. H√£y g·∫∑p g·ª° c√°c chuy√™n gia c·ªßa ch√∫ng t√¥i, nh·ªØng ng∆∞·ªùi lu√¥n s·∫µn s√†ng gi√∫p b·∫°n t·ªëi ∆∞u h√≥a th√†nh c√¥ng ‚Äî kh√¥ng ch·ªâ trong c√¥ng vi·ªác m√† c√≤n trong cu·ªôc s·ªëng.</p>

              <ul>
                <li><i class='bx bx-badge-check'></i> Nh√¢n vi√™n l√†m vi·ªác t·ª´ c√°c vƒÉn ph√≤ng t·∫°i USA</li>
                <li><i class='bx bx-badge-check'></i> Linh ho·∫°t tƒÉng/gi·∫£m quy m√¥ theo y√™u c·∫ßu</li>
                <li><i class='bx bx-badge-check'></i> D·ª± √°n m·ªôt l·∫ßn ho·∫∑c k√©o d√†i theo nhu c·∫ßu</li>
                <li><i class='bx bx-badge-check'></i> Tuy·ªÉn d·ª•ng theo k·ªπ nƒÉng chuy√™n m√¥n</li>
              </ul>
            </div>
          </div>
          <!-- Form input -->
          <div class="col-lg-6 col-md-12">
            <div class="contact-form">
              <h3>B·∫Øt ƒë·∫ßu tr·∫£i nghi·ªám mi·ªÖn ph√≠ c·ªßa b·∫°n</h3>

              <form @submit.prevent="handleSubmit" enctype="multipart/form-data">
                <div class="row">
                  <!-- T√™n -->
                  <div class="col-lg-6 col-md-6">
                    <div class="form-group">
                      <input type="text" v-model="form.name" class="form-control" placeholder="T√™n c·ªßa b·∫°n" required>
                    </div>
                  </div>

                  <!-- Email -->
                  <div class="col-lg-6 col-md-6">
                    <div class="form-group">
                      <input type="email" v-model="form.email" class="form-control" placeholder="Email c·ªßa b·∫°n" required>
                    </div>
                  </div>

                  <!-- SƒêT -->
                  <div class="col-lg-6 col-md-6">
                    <div class="form-group">
                      <input type="text" v-model="form.phone" class="form-control" placeholder="S·ªë ƒëi·ªán tho·∫°i c·ªßa b·∫°n" required>
                    </div>
                  </div>

                  <!-- Ch·ªß ƒë·ªÅ -->
                  <div class="col-lg-6 col-md-6">
                    <div class="form-group">
                      <input type="text" v-model="form.subject" class="form-control" placeholder="Ch·ªß ƒë·ªÅ (t√πy ch·ªçn)">
                    </div>
                  </div>

                  <!-- Tin nh·∫Øn -->
                  <div class="col-lg-12 col-md-12">
                    <div class="form-group">
                      <textarea v-model="form.message" class="form-control" rows="5" placeholder="Tin nh·∫Øn (t√πy ch·ªçn)"></textarea>
                    </div>
                  </div>

                  <!-- Upload CV -->
                  <div class="col-lg-12 col-md-12">
                    <div class="form-group custom-file-upload">
                      <label class="form-label">T·∫£i l√™n t·ªáp c·ªßa b·∫°n</label>
                      <div class="custom-upload-wrapper">
                        <label class="upload-btn">
                          üìé Ch·ªçn t·ªáp
                          <input
                            type="file"
                            accept=".pdf,.doc,.docx,.jpg,.jpeg,.png"
                            @change="handleFileUpload"
                          />
                        </label>
                        <span class="file-name" v-if="cvFile">{{ cvFile.name }}</span>
                        <span class="file-name" v-else>Kh√¥ng c√≥ t·ªáp n√†o ƒë∆∞·ª£c ch·ªçn</span>
                      </div>
                    </div>
                  </div>

                  <!-- Submit -->
                  <div class="col-lg-12 col-md-12">
                    <button type="submit" class="default-btn">
                      <i class='bx bxs-paper-plane'></i> G·ª≠i Tin Nh·∫Øn<span></span>
                    </button>
                  </div>
                </div>

                <!-- Alerts -->
                <div v-if="success" class="alert alert-success mt-3">G·ª≠i th√†nh c√¥ng!</div>
                <div v-if="error" class="alert alert-danger mt-3">ƒê√£ c√≥ l·ªói x·∫£y ra!</div>
              </form>
            </div>
          </div>

          <!-- Ph·∫ßn m√¥ t·∫£ b√™n ph·∫£i (b·∫°n c√≥ th·ªÉ gi·ªØ nguy√™n) -->
          <div class="col-lg-6 col-md-12">
            <!-- N·ªôi dung gi·ªõi thi·ªáu -->
          </div>
        </div>
      </div>
    </div>
  </section>
</template>


<script setup>
import { ref } from 'vue'
import axios from 'axios'
import { BASE_API_URL } from '@/main'

// State
const form = ref({
  name: '',
  email: '',
  phone: '',
  subject: '',
  message: ''
})
const cvFile = ref(null)
const success = ref(false)
const error = ref(false)

// File handler
const handleFileUpload = (e) => {
  const file = e.target.files[0]
  if (file) {
    cvFile.value = file
  }
}

// Submit handler
const handleSubmit = async () => {
  const formData = new FormData()
  formData.append('name', form.value.name)
  formData.append('email', form.value.email)
  formData.append('phone', form.value.phone)
  formData.append('subject', form.value.subject || '')
  formData.append('message', form.value.message || '')
  if (cvFile.value) {
    formData.append('cv', cvFile.value)
  }

  try {
    await axios.post(`${BASE_API_URL}/contact`, formData, {
      headers: { 'Content-Type': 'multipart/form-data' }
    })
    success.value = true
    error.value = false
    form.value = { name: '', email: '', phone: '', subject: '', message: '' }
    cvFile.value = null
  } catch (e) {
    console.error('API error:', e)
    error.value = true
    success.value = false
  }
}
</script>

<style scoped>
.custom-upload-wrapper {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
  margin-top: 8px;
}

.upload-btn {
  position: relative;
  background-color: #007bff;
  color: #fff;
  padding: 8px 18px;
  border-radius: 6px;
  font-weight: 500;
  cursor: pointer;
  overflow: hidden;
  transition: background 0.3s;
}

.upload-btn:hover {
  background-color: #0056b3;
}

.upload-btn input[type="file"] {
  position: absolute;
  left: 0;
  top: 0;
  opacity: 0;
  cursor: pointer;
  height: 100%;
  width: 100%;
}

.file-name {
  font-size: 14px;
  color: #444;
}
</style>
